#!/usr/local/plan9/bin/rc

if(! ~ $#* 2){
	echo 'usage: netfileput system path' >[1=2]
	exit usage
}

f=putfile

. netfilelib.rc $1

fn putfile{
	cat >$t
	if(! 9 echo -put $t $2 | mysftp $1 >$t.e >[2=1])
		exit 1
	egrep -v '^Uploading' $t.e >$t.e2
	if(test -s $t.e2){
		cat $t.e >[1=2]
		exit 1
	}
}
fn putfile9p{
	if(! 9p write $1/$2)
		exit 1
}

$f $1 $2
exit 0

